<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>パスワード変更（FIN014）</title>
    <link rel="stylesheet" href="css/style.css"> 
</head>
<body class="fin014">

    <header class="fixed-header">
        <div class="fixed-header-left">
        </div>

        <div class="fixed-header-title">船橋今なにする？</div>

        <div class="fixed-header-icon-area">

            <% if (typeof isLoggedIn !=='undefined' && isLoggedIn) { %>
                <div class="fin001-user-controls">
                    <span class="fin001-welcome-msg">
                        <%= userName %>さん
                    </span>

                    <a href="/mypage" class="header-profile-icon">
                        <img id="headerProfileImage" src="<%= userIconUrl %>" alt="メニュー">
                    </a>

                    <form action="/logout" method="POST" style="display: inline;"
                        onsubmit="return confirm('ログアウトしますか？');">
                        <button type="submit" class="btn btn-default fin001-logout-btn">ログアウト</button>
                    </form>
                </div>

                <% } else { %>
                    <a href="/welcome?returnUrl=<%= currentUrl %>" class="btn btn-default fin006-register-btn"
                        role="button">
                        ログイン
                    </a>

                    <a href="/FIN003?returnUrl=<%= currentUrl %>" class="btn btn-default fin006-register-btn"
                        role="button">
                        新規登録
                    </a>
                    <% } %>
        </div>
    </header>

    <div class="container fin014-container">
        
        <h2>パスワード変更</h2>

        <% if (error) { %>
            <p class="error-message" style="color: red;"><%= error %></p>
        <% } %>
        
        <form action="/update-password" method="POST">
            <div class="form-group">
                <label for="current-password" class="form-label">現在のパスワード</label>
                <input type="password" id="current-password" name="currentPassword" class="form-input" required>
            </div>

            <div class="form-group">
                <label for="new-password" class="form-label">新しいパスワード</label>
                <input type="password" id="new-password" name="newPassword" class="form-input" required>
            </div>

            <div class="form-group">
                <label for="confirm-password" class="form-label">新しいパスワード（確認用）</label>
                <input type="password" id="confirm-password" name="confirmPassword" class="form-input" required>
            </div>

            <div class="button-area">
                <button type="submit" class="btn btn-primary">確定</button>
                <a href="/FIN009" class="btn btn-secondary">戻る</a>
            </div>
        </form>

    </div>

</body>
</html>