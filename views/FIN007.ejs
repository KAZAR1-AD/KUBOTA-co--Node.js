<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>検索結果（FIN007）</title>
    <link rel="stylesheet" href="/css/style.css"> 
</head>
<body class="fin007">

    <div class="fin007-title-bar" style="text-align: center; display: flex; justify-content: center; width: 100%;">
        <h2>検索結果</h2>
    </div>

    <div class="fin007-results-container">

        <% if (!shop || shop.length === 0) { %>
            <div style="text-align: center; padding: 20px;">
                <p>条件に合うお店が見つかりませんでした。</p>
            </div>
        <% } else { %>
            
            <% shop.forEach(item => { %>
            <div class="fin007-result-item">
                <span class="fin007-result-info">
                    <%= item.shop_name %> 
                    徒歩<%= item.distance %>分 
                    予算：<%= item.budget %>円
                </span>
                <span class="fin007-result-star">★</span>
            </div>
            <% }); %>

        <% } %>


        <% if (typeof totalPages !== 'undefined' && totalPages > 1) { %>
        <div class="pagination-container">
            <nav class="pagination">
                
                <% if (currentPage > 1) { %>
                    <a href="/search-results?page=<%= currentPage - 1 %>" class="pagination-link">
                        &laquo; 前へ
                    </a>
                <% } else { %>
                    <span class="pagination-link disabled">&laquo; 前へ</span>
                <% } %>


                <% for(let i = 1; i <= totalPages; i++) { %>
                    <% if (i === currentPage) { %>
                        <span class="pagination-link active"><%= i %></span>
                    <% } else { %>
                        <a href="/search-results?page=<%= i %>" class="pagination-link">
                            <%= i %>
                        </a>
                    <% } %>
                <% } %>


                <% if (currentPage < totalPages) { %>
                    <a href="/search-results?page=<%= currentPage + 1 %>" class="pagination-link">
                        次へ &raquo;
                    </a>
                <% } else { %>
                    <span class="pagination-link disabled">次へ &raquo;</span>
                <% } %>

            </nav>
        </div>
        <% } %>

    </div>

    <a href="/search" class="fin007-change-criteria-btn">
        条件<br>を変える
    </a>
    
</body>
</html>