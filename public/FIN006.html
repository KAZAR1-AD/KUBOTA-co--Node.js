<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ãŠåº—æ¤œç´¢ï¼ˆFIN006ï¼‰</title>
  <link rel="stylesheet" href="../CSS/style.css" />
</head>

<body class="fin006">

  <header class="fixed-header">
    <div class="fixed-header-left"></div>
    <div class="fixed-header-title">èˆ¹æ©‹ä»Šãªã«ã™ã‚‹ï¼Ÿ</div>
    <div class="fixed-header-icon-area" id="headerIconArea"></div>
  </header>

  <div class="container fin006-container">
    <a href="FIN008.html" class="page-menu-icon">ğŸ˜Š</a>
    <h2 class="fin006-title">ã©ã‚“ãªãŠåº—ã‚’ãŠæ¢ã—ã§ã™ã‹ï¼Ÿ</h2>

    <div class="fin006-search-box">
      <div class="fin006-criteria-row">
        <label for="budgetSlider" class="fin006-label">1äººå½“ãŸã‚Šã®äºˆç®—</label>
        <div class="fin006-input-area">
          <input type="range" id="budgetSlider" class="fin006-slider" min="1000" max="20000" step="1000" value="1000" />
          <span id="budgetValue" class="fin006-value-display">1000å††</span>
        </div>
      </div>

      <div class="fin006-criteria-row">
        <label for="distance" class="fin006-label">è·é›¢</label>
        <div class="fin006-input-area">
          <select id="distance" class="fin006-select">
            <option value="1">æŒ‡å®šãªã—</option>
            <option value="2">500mä»¥å†…</option>
            <option value="3">1kmä»¥å†…</option>
            <option value="4">3kmä»¥å†…</option>
          </select>
        </div>
      </div>

      <div class="fin006-criteria-row">
        <span class="fin006-label">ã‚¸ãƒ£ãƒ³ãƒ«</span>
        <div class="fin006-input-area fin006-checkbox-group">
          <label><input type="checkbox" name="genre" value="jp"> å’Œé£Ÿ</label>
          <label><input type="checkbox" name="genre" value="we"> æ´‹é£Ÿ</label>
          <label><input type="checkbox" name="genre" value="cn"> ä¸­è¯</label>
          <label><input type="checkbox" name="genre" value="ot"> ãã®ä»–</label>
        </div>
      </div>
    </div>

    <div class="button-area button-area-center">
      <button class="btn btn-primary fin006-btn" id="searchBtn">æ¤œç´¢</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼è¡¨ç¤º
      const budgetSlider = document.getElementById('budgetSlider');
      const budgetValue = document.getElementById('budgetValue');
      if (budgetSlider && budgetValue) {
        const updateBudget = () => budgetValue.textContent = budgetSlider.value + 'å††';
        budgetSlider.addEventListener('input', updateBudget);
        updateBudget();
      }

      // ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      const savedImageUrl = localStorage.getItem('profileImage');
      const iconArea = document.getElementById('headerIconArea');
      if (iconArea) {
        if (isLoggedIn === 'true') {
          const imageUrlToShow = savedImageUrl ? savedImageUrl : '../images/kubota_icon0.png';
          iconArea.innerHTML = `
            <a href="FIN008.html" class="header-profile-icon">
              <img src="${imageUrlToShow}" alt="ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
            </a>`;
        } else {
          iconArea.innerHTML = '<a href="FIN002.html" class="btn btn-primary header-login-btn">ãƒ­ã‚°ã‚¤ãƒ³</a>';
          const loginBtn = iconArea.querySelector('.header-login-btn');
          if (loginBtn) {
            loginBtn.addEventListener('click', function (e) {
              e.preventDefault();
              const currentUrl = window.location.href;
              localStorage.setItem('redirectUrl', currentUrl);
              localStorage.setItem('loginRedirect', currentUrl);
              window.location.href = this.href;
            });
          }
        }
      }

      // æ¤œç´¢æ¡ä»¶ã‚’ä¿å­˜ã—ã¦çµæœç”»é¢ã¸
      const searchBtn = document.getElementById('searchBtn');
      searchBtn.addEventListener('click', () => {
        const distance = document.getElementById('distance').value;
        const genres = Array.from(document.querySelectorAll('input[name="genre"]:checked')).map(g => g.value);
        localStorage.setItem('searchBudget', budgetSlider.value);
        localStorage.setItem('searchDistance', distance);
        localStorage.setItem('searchGenres', JSON.stringify(genres));
        location.href = 'FIN007.html';
      });
    });
  </script>

</body>

</html>